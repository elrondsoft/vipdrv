<div class="avatar-update-container"
     *ngIf="isImageUrlDefined()">
    <div class="avatar-update-container-body">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                <div class="row">
                    <div class="col-12">
                        <img class="rounded-circle"
                             alt=" "
                             [src]="getImageUrl()"
                             [width]="imageWidth"
                             [height]="imageHeight">
                    </div>
                </div>
                <div class="row avatar-update-row"
                     *ngIf="isModeView()">
                    <div class="col-12">
                        <button type="button"
                                class="btn btn-sm btn-secondary"
                                [disabled]="isPatchAvatarProcessing()"
                                (click)="startEditImageViaCropper()">
                            <span translate>userProfile.tabs.patchAvatarComponent.defineAvatarViaFile</span>
                        </button>
                        <button type="button"
                                class="btn btn-sm btn-secondary"
                                [disabled]="isPatchAvatarProcessing()"
                                (click)="startEditImageViaUrlInput()">
                            <span translate>userProfile.tabs.patchAvatarComponent.defineAvatarViaDirectUrl</span>
                        </button>
                    </div>
                </div>
                <div class="row avatar-update-row"
                     *ngIf="isModeEditViaCropper()">
                    <div class="col-12">
                        <button type="button"
                                class="btn btn-sm btn-secondary pull-left test-drive-left-standalone-btn"
                                [disabled]="isPatchAvatarProcessing()"
                                (click)="cancelEditImageViaCropper()">
                            <span translate>general.actions.text_cancel</span>
                        </button>
                        <button type="button"
                                class="btn btn-sm btn-secondary pull-left test-drive-right-standalone-btn"
                                [disabled]="!isCropperImageDefined() || isPatchAvatarProcessing()"
                                (click)="commitEditImageViaCropper()">
                            <span translate>general.actions.text_accept</span>
                        </button>
                    </div>
                </div>
                <div class="row avatar-update-row"
                     *ngIf="isModeEditViaUrlInput()">
                    <div class="col-12">
                        <button type="button"
                                class="btn btn-sm btn-secondary pull-left test-drive-left-standalone-btn"
                                [disabled]="isPatchAvatarProcessing()"
                                (click)="cancelEditImageViaUrlInput()">
                            <span translate>general.actions.text_cancel</span>
                        </button>
                        <button type="button"
                                class="btn btn-sm btn-secondary pull-left test-drive-right-standalone-btn"
                                [disabled]="!isTempImageUrlDefined() || isPatchAvatarProcessing()"
                                (click)="commitEditImageViaUrlInput()">
                            <span translate>general.actions.text_accept</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"
                 *ngIf="isModeEditViaCropper()">
                <div class="row">
                    <div class="col-12">
                        <img-cropper #avatarCropper
                                     [image]="imageCropperData"
                                     [settings]="imageCropperSettings">
                        </img-cropper>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <label class="custom-file">
                            <input type="file"
                                   id="avatar-browse-file"
                                   class="custom-file-input"
                                   [disabled]="isPatchAvatarProcessing()"
                                   (change)="browseFileChangeListenerInImageCropper($event)">
                            <span class="custom-file-control"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6"
                 *ngIf="isModeEditViaUrlInput()">
                <div class="hidden-sm-down avatar-update-url-input"></div>
                <div class="form-group">
                    <label for="avatar-url"
                           translate>
                        userProfile.tabs.patchAvatarComponent.avatarUrl
                    </label>
                    <input id="avatar-url"
                           type="text"
                           name="avatar-url"
                           class="form-control"
                           required=""
                           autofocus=""
                           placeholder="http://www.google.com/avatar.jpg"
                           [disabled]="isPatchAvatarProcessing()"
                           [(ngModel)]="tempImageUrl">
                    <small id="avatar-url-help"
                           class="form-text text-muted"
                           translate>
                        userProfile.tabs.patchAvatarComponent.avatarUrlHelp
                    </small>
                </div>
            </div>
        </div>
    </div>
    <div class="avatar-update-container-footer">
        <div class="row">
            <div class="col-12">
                <button type="button"
                        class="btn btn-primary pull-right test-drive-right-standalone-btn"
                        *ngIf="isPatchAvatarAllowed()"
                        [disabled]="isPatchAvatarDisabled()"
                        (click)="patchAvatar()">
                    <i class="fa fa-spinner fa-pulse" *ngIf="isPatchAvatarProcessing()"></i>
                    <i class="fa fa-check" *ngIf="!isPatchAvatarProcessing()"></i>
                    <span translate>general.actions.text_commit</span>
                </button>
                <button type="button"
                        class="btn btn-secondary pull-right test-drive-left-standalone-btn"
                        *ngIf="isResetAvatarAllowed()"
                        [disabled]="isResetAvatarDisabled()"
                        (click)="resetImage()">
                    <span translate>general.actions.text_reset</span>
                </button>
            </div>
        </div>
    </div>
</div>