<div class="site-details-template">
    <div class="site-details-template-header">
        <div class="site-details-title">
            <a class="site-details-title-text"
               href="/#/pages/sites"
               translate>
                sites.details.title
            </a>
            <span class="site-details-title-text"
                  *ngIf="!!entity">
                /
            </span>
            <span class="site-details-title-site-name-text"
                  *ngIf="!!entity">
                {{entity.name}}
            </span>
        </div>
    </div>
    <div class="site-details-template-body"
         [ngBusy]="promiseService.applicationPromises.sites.get.promise">
        <ul class="nav nav-tabs"
            id="site-details-tabs"
            role="tablist">
            <li class="nav-item">
                <a id="overview-tab"
                   class="nav-link active"
                   href="#overview"
                   data-toggle="tab"
                   role="tab"
                   aria-controls="overview-tab"
                   aria-expanded="true"
                   translate>
                    sites.details.tabs.overview
                </a>
            </li>
            <li class="nav-item">
                <a id="experts-tab"
                   class="nav-link"
                   href="#experts"
                   data-toggle="tab"
                   role="tab"
                   aria-controls="experts-tab"
                   translate>
                    sites.details.tabs.experts
                </a>
            </li>
            <li class="nav-item">
                <a id="beverages-tab"
                   class="nav-link"
                   href="#beverages"
                   data-toggle="tab"
                   role="tab"
                   aria-controls="beverages-tab"
                   translate>
                    sites.details.tabs.beverages
                </a>
            </li>
            <li class="nav-item">
                <a id="routes-tab"
                   class="nav-link"
                   href="#routes"
                   data-toggle="tab"
                   role="tab"
                   aria-controls="routes-tab"
                   translate>
                    sites.details.tabs.routes
                </a>
            </li>
            <li class="nav-item">
                <a id="notifications-tab"
                   class="nav-link"
                   href="#notifications"
                   data-toggle="tab"
                   role="tab"
                   aria-controls="notifications-tab"
                   translate>
                    sites.details.tabs.notifications
                </a>
            </li>
            <li class="nav-item">
                <a id="theme-tab"
                   class="nav-link"
                   href="#theme"
                   data-toggle="tab"
                   role="tab"
                   aria-controls="theme-tab"
                   translate>
                    sites.details.tabs.theme
                </a>
            </li>
        </ul>
        <div id="site-details"
             class="tab-content"
             *ngIf="!!entity">
            <div id="overview"
                 class="tab-pane fade show active"
                 role="tabpanel"
                 aria-labelledby="overview-tab">
                <site-overview [entity]="entity"></site-overview>
            </div>
            <div id="experts"
                 class="tab-pane fade show"
                 role="tabpanel"
                 aria-labelledby="experts-tab">
                <experts-table [siteId]="entity.id"
                               [filter]="getExpertsFilter()">
                </experts-table>
            </div>
            <div id="beverages"
                 class="tab-pane fade show"
                 role="tabpanel"
                 aria-labelledby="beverages-tab">
                <beverages-table [siteId]="entity.id"
                                 [filter]="getBeveragesFilter()">
                </beverages-table>
            </div>
            <div id="routes"
                 class="tab-pane fade show"
                 role="tabpanel"
                 aria-labelledby="routes-tab">
                <routes-table [siteId]="entity.id"
                              [filter]="getRoutesFilter()">
                </routes-table>
            </div>
            <div id="notifications"
                 class="tab-pane fade show"
                 role="tabpanel"
                 aria-labelledby="notifications-tab">
                <div class="site-notifications-template">
                    <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                            <div class="row site-notifications-email-label-row">
                                <div class="col-xl-12">
                                    <span translate>sites.details.notifications.emails</span>:
                                </div>
                            </div>
                            <div class="row site-notifications-email-entity-row"
                                 *ngFor="let item of emailEntities">
                                <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1">
                                </div>
                                <div class="col-xl-8 col-lg-8 col-md-10 col-sm-10 col-10">
                                    <div class="input-group input-group-sm">
                                        <input type="email"
                                           class="form-control form-control-sm"
                                           [(ngModel)]="item.value"/>
                                        <span class="input-group-btn">
                                            <button type="button"
                                                    class="btn btn-sm btn-outline-danger"
                                                    (click)="deleteEmailFromContacts(item)">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row site-notifications-email-entity-row">
                                <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1">
                                </div>
                                <div class="col-xl-8 col-lg-8 col-md-10 col-sm-10 col-10">
                                    <hr>
                                    <div class="input-group input-group-sm">
                                        <input type="email"
                                               class="form-control form-control-sm"
                                               [(ngModel)]="newEmailEntity.value"/>
                                        <span class="input-group-btn">
                                            <button type="button"
                                                    [disabled]="!isNewEmailValid()"
                                                    class="btn btn-sm btn-outline-success"
                                                    (click)="addNewEmailEntity()">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
                            <div class="row site-notifications-sms-label-row">
                                <div class="col-xl-12">
                                    <span translate>sites.details.notifications.sms</span>:
                                </div>
                            </div>
                            <div class="row site-notifications-sms-entity-row"
                                 *ngFor="let item of smsEntities">
                                <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1">
                                </div>
                                <div class="col-xl-8 col-lg-8 col-md-10 col-sm-10 col-10">
                                    <div class="input-group input-group-sm">
                                        <input type="email"
                                               class="form-control form-control-sm"
                                               [(ngModel)]="item.value"/>
                                        <span class="input-group-btn">
                                            <button type="button"
                                                    class="btn btn-sm btn-outline-danger"
                                                    (click)="deleteSMSFromContacts(item)">
                                                <i class="fa fa-times"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="row site-notifications-sms-entity-row">
                                <div class="col-xl-1 col-lg-1 col-md-1 col-sm-1 col-1">
                                </div>
                                <div class="col-xl-8 col-lg-8 col-md-10 col-sm-10 col-10">
                                    <hr>
                                    <div class="input-group input-group-sm">
                                        <input type="email"
                                               class="form-control form-control-sm"
                                               [(ngModel)]="newSMSEntity.value"/>
                                        <span class="input-group-btn">
                                            <button type="button"
                                                    [disabled]="!isNewSMSValid()"
                                                    class="btn btn-sm btn-outline-success"
                                                    (click)="addNewSMSEntity()">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="site-notifications-template-footer">
                        <button type="button"
                                [disabled]="!!patchContactsPromise"
                                style="margin: 3px;"
                                class="btn btn-primary pull-right"
                                (click)="saveSiteContacts()">
                            <i class="fa fa-refresh fa-spin" *ngIf="!!patchContactsPromise"></i>
                            <span translate>general.actions.text_save</span>
                        </button>
                        <button type="button"
                                style="margin: 3px;"
                                class="btn btn-default pull-right"
                                (click)="resetSiteContacts()">
                            <span translate>general.actions.text_reset</span>
                        </button>
                    </div>
                </div>
            </div>
            <div id="theme"
                 class="tab-pane fade show"
                 role="tabpanel"
                 aria-labelledby="theme-tab">
                theme component (not implemented yet)
                // Should patch theme for current site entity
            </div>
        </div>
    </div>
</div>